<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ECS: src/ecs.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ECS<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">libreria para creacion de ECS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">ecs.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implementación de las funciones del sistema Entity-Component-System (ECS)  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="ecs_8h_source.html">ecs.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aaf0209b7e83b6f2db2062f8419fa9b35" id="r_aaf0209b7e83b6f2db2062f8419fa9b35"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaf0209b7e83b6f2db2062f8419fa9b35">ECS_C</a></td></tr>
<tr class="separator:aaf0209b7e83b6f2db2062f8419fa9b35"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abc631ea620470e7587309fbbabe70b62" id="r_abc631ea620470e7587309fbbabe70b62"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ecs_8h.html#a7fb43c464e9ede60eb608851afca7ecb">Component_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abc631ea620470e7587309fbbabe70b62">get_type_data</a> (<a class="el" href="structadvanced__data.html">advanced_data</a> *data)</td></tr>
<tr class="memdesc:abc631ea620470e7587309fbbabe70b62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtiene los datos de un componente.  <br /></td></tr>
<tr class="separator:abc631ea620470e7587309fbbabe70b62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a199186350fc25be37db0e03dd0ce6172" id="r_a199186350fc25be37db0e03dd0ce6172"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a199186350fc25be37db0e03dd0ce6172">dump_entidad</a> (void *self, uint16_t number_data)</td></tr>
<tr class="memdesc:a199186350fc25be37db0e03dd0ce6172"><td class="mdescLeft">&#160;</td><td class="mdescRight">Imprime en hexadecimal los datos de una entidad.  <br /></td></tr>
<tr class="separator:a199186350fc25be37db0e03dd0ce6172"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb1a65851848362cfaf4b74fd399a7f5" id="r_abb1a65851848362cfaf4b74fd399a7f5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ecs_8h.html#ac1f825271a8ade98586af88d46631bf4">Entity</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abb1a65851848362cfaf4b74fd399a7f5">createEntity</a> (<a class="el" href="ecs_8h.html#ac1f825271a8ade98586af88d46631bf4">Entity</a> *self, uint16_t number_data)</td></tr>
<tr class="memdesc:abb1a65851848362cfaf4b74fd399a7f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Crea una nueva entidad.  <br /></td></tr>
<tr class="separator:abb1a65851848362cfaf4b74fd399a7f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a125b9cc8c0ba3bb7cf5e877347f5e28f" id="r_a125b9cc8c0ba3bb7cf5e877347f5e28f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ecs_8h.html#ac1f825271a8ade98586af88d46631bf4">Entity</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a125b9cc8c0ba3bb7cf5e877347f5e28f">reallocEntity</a> (<a class="el" href="ecs_8h.html#ac1f825271a8ade98586af88d46631bf4">Entity</a> *self, size_t old_number_data, size_t new_number_data)</td></tr>
<tr class="memdesc:a125b9cc8c0ba3bb7cf5e877347f5e28f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Redimensiona una entidad existente.  <br /></td></tr>
<tr class="separator:a125b9cc8c0ba3bb7cf5e877347f5e28f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af387fc28b69c7969a286f5a9ade089ff" id="r_af387fc28b69c7969a286f5a9ade089ff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af387fc28b69c7969a286f5a9ade089ff">freeEntity</a> (void *entity)</td></tr>
<tr class="memdesc:af387fc28b69c7969a286f5a9ade089ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Libera la memoria de una entidad y sus componentes.  <br /></td></tr>
<tr class="separator:af387fc28b69c7969a286f5a9ade089ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementación de las funciones del sistema Entity-Component-System (ECS) </p>
<dl class="section author"><dt>Author</dt><dd>Desmon (David) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2023 @license Apache License, Version 2.0 with Modification </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aaf0209b7e83b6f2db2062f8419fa9b35" name="aaf0209b7e83b6f2db2062f8419fa9b35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf0209b7e83b6f2db2062f8419fa9b35">&#9670;&#160;</a></span>ECS_C</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ECS_C</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Licencia Apache, Versión 2.0 con Modificación</p>
<p>Copyright 2023 Desmon (David)</p>
<p>Se concede permiso, de forma gratuita, a cualquier persona que obtenga una copia de este software y archivos de documentación asociados (el "Software"), para tratar el Software sin restricciones, incluidos, entre otros, los derechos de uso, copia, modificación, fusión, publicación, distribución, sublicencia y/o venta de copias del Software, y para permitir a las personas a quienes se les proporcione el Software hacer lo mismo, sujeto a las siguientes condiciones:</p>
<p>El anterior aviso de copyright y este aviso de permiso se incluirán en todas las copias o partes sustanciales del Software.</p>
<p>EL SOFTWARE SE PROPORCIONA "TAL CUAL", SIN GARANTÍA DE NINGÚN TIPO, EXPRESA O IMPLÍCITA, INCLUYENDO PERO NO LIMITADO A LAS GARANTÍAS DE COMERCIABILIDAD, IDONEIDAD PARA UN PROPÓSITO PARTICULAR Y NO INFRACCIÓN. EN NINGÚN CASO LOS TITULARES DEL COPYRIGHT O LOS TITULARES DE LOS DERECHOS DE AUTOR SERÁN RESPONSABLES DE NINGÚN RECLAMO, DAÑO U OTRA RESPONSABILIDAD, YA SEA EN UNA ACCIÓN DE CONTRATO, AGRAVIO O DE OTRA MANERA, QUE SURJA DE, FUERA DE O EN CONEXIÓN CON EL SOFTWARE O EL USO U OTRO TIPO DE ACCIONES EN EL SOFTWARE.</p>
<p>Además, cualquier modificación realizada por terceros se considerará propiedad del titular original de los derechos de autor. Los titulares de derechos de autor originales no se responsabilizan de las modificaciones realizadas por terceros.</p>
<p>Queda explícitamente establecido que no es obligatorio especificar ni notificar los cambios realizados entre versiones, ni revelar porciones específicas de código modificado. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="abb1a65851848362cfaf4b74fd399a7f5" name="abb1a65851848362cfaf4b74fd399a7f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb1a65851848362cfaf4b74fd399a7f5">&#9670;&#160;</a></span>createEntity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ecs_8h.html#ac1f825271a8ade98586af88d46631bf4">Entity</a> createEntity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ecs_8h.html#ac1f825271a8ade98586af88d46631bf4">Entity</a> *</td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>number_data</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Crea una nueva entidad. </p>
<dl class="section warning"><dt>Warning</dt><dd>Todas las entidades del mismo tipo deben seguir el mismo orden de datos. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>Entity* Puntero doble donde se almacenará la entidad creada </td></tr>
    <tr><td class="paramname">number_data</td><td>Número de componentes que tendrá la entidad </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Puntero a la entidad creada, o NULL en caso de error </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  130</span>                                                       {</div>
<div class="line"><span class="lineno">  131</span>    DEBUG_PRINT(DEBUG_LEVEL_INFO,</div>
<div class="line"><span class="lineno">  132</span>        INIT_TYPE_FUNC_DBG(<a class="code hl_define" href="ecs_8h.html#a0a2ab36c53e84193f3aa6eaab81282df">Entity</a>, <a class="code hl_function" href="ecs_8h.html#abb1a65851848362cfaf4b74fd399a7f5">createEntity</a>)</div>
<div class="line"><span class="lineno">  133</span>            TYPE_DATA_DBG(<a class="code hl_define" href="ecs_8h.html#a0a2ab36c53e84193f3aa6eaab81282df">Entity</a>*, <span class="stringliteral">&quot;self = %p&quot;</span>)</div>
<div class="line"><span class="lineno">  134</span>            TYPE_DATA_DBG(uint16_t, <span class="stringliteral">&quot;number_data = %p&quot;</span>)</div>
<div class="line"><span class="lineno">  135</span>        END_TYPE_FUNC_DBG,</div>
<div class="line"><span class="lineno">  136</span>        self, number_data);</div>
<div class="line"><span class="lineno">  137</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  138</span><span class="comment">     * Crea una entidad generica, la entidad debe convertirse en un puntero Component_t</span></div>
<div class="line"><span class="lineno">  139</span><span class="comment">     * el cual puede usarse como lista de valores con los componentes de la entidad.</span></div>
<div class="line"><span class="lineno">  140</span><span class="comment">     * </span></div>
<div class="line"><span class="lineno">  141</span><span class="comment">     * Se espera que self, sea una referencia donde almacenar </span></div>
<div class="line"><span class="lineno">  142</span><span class="comment">     * la entidad creada si no lo fue ya.</span></div>
<div class="line"><span class="lineno">  143</span><span class="comment">     * </span></div>
<div class="line"><span class="lineno">  144</span><span class="comment">     * Se espera que number_data sea el numero de datos que va a almacenar la entidad.</span></div>
<div class="line"><span class="lineno">  145</span><span class="comment">     * </span></div>
<div class="line"><span class="lineno">  146</span><span class="comment">     * Importante: todas las entidades del mismo tipo deben darse el orden de datos</span></div>
<div class="line"><span class="lineno">  147</span><span class="comment">     * de la misma manera. En caso de que mismas entidades tengan los datos en distintos</span></div>
<div class="line"><span class="lineno">  148</span><span class="comment">     * lugares, no se podan situar de forma correcta al 100%.</span></div>
<div class="line"><span class="lineno">  149</span><span class="comment">     * </span></div>
<div class="line"><span class="lineno">  150</span><span class="comment">    */</span></div>
<div class="line"><span class="lineno">  151</span>    <span class="keywordflow">if</span> (self == NULL) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  152</span>    </div>
<div class="line"><span class="lineno">  153</span>    <a class="code hl_define" href="ecs_8h.html#a0a2ab36c53e84193f3aa6eaab81282df">Entity</a> *_self = *self;</div>
<div class="line"><span class="lineno">  154</span>    <span class="keywordflow">if</span> (_self == NULL) {</div>
<div class="line"><span class="lineno">  155</span>        _self = malloc((<span class="keyword">sizeof</span>(<a class="code hl_typedef" href="ecs_8h.html#a7fb43c464e9ede60eb608851afca7ecb">Component_t</a>) * number_data));</div>
<div class="line"><span class="lineno">  156</span>        <span class="keywordflow">if</span> (_self == NULL) {</div>
<div class="line"><span class="lineno">  157</span>            _self = NULL;</div>
<div class="line"><span class="lineno">  158</span>            <span class="keywordflow">return</span> _self;</div>
<div class="line"><span class="lineno">  159</span>        }</div>
<div class="line"><span class="lineno">  160</span>        <span class="comment">// poner la memoria como valores desconocidos</span></div>
<div class="line"><span class="lineno">  161</span>        memset(_self, <a class="code hl_enumvalue" href="ecs_8h.html#a193c7c54f3e1a85ea626883ba330ea1aa03fa22b2ff527f9e0086025afadacf79">Unknowned</a>, <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="ecs_8h.html#a7fb43c464e9ede60eb608851afca7ecb">Component_t</a>) * number_data );</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  163</span>        <span class="comment">// indicar el final de la entidad</span></div>
<div class="line"><span class="lineno">  164</span>        *(uint16_t*)((<span class="keywordtype">void</span>*)_self + ((<span class="keyword">sizeof</span>(<a class="code hl_typedef" href="ecs_8h.html#a7fb43c464e9ede60eb608851afca7ecb">Component_t</a>) * number_data) )) = 0xffff;</div>
<div class="line"><span class="lineno">  165</span>    }</div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>    <span class="keywordflow">return</span> _self;</div>
<div class="line"><span class="lineno">  168</span>}</div>
<div class="ttc" id="aecs_8h_html_a0a2ab36c53e84193f3aa6eaab81282df"><div class="ttname"><a href="ecs_8h.html#a0a2ab36c53e84193f3aa6eaab81282df">Entity</a></div><div class="ttdeci">#define Entity(name)</div><div class="ttdoc">ECS = Entidad-Componente-Sistema. Macro entidad.</div><div class="ttdef"><b>Definition</b> ecs.h:67</div></div>
<div class="ttc" id="aecs_8h_html_a193c7c54f3e1a85ea626883ba330ea1aa03fa22b2ff527f9e0086025afadacf79"><div class="ttname"><a href="ecs_8h.html#a193c7c54f3e1a85ea626883ba330ea1aa03fa22b2ff527f9e0086025afadacf79">Unknowned</a></div><div class="ttdeci">@ Unknowned</div><div class="ttdef"><b>Definition</b> ecs.h:175</div></div>
<div class="ttc" id="aecs_8h_html_a7fb43c464e9ede60eb608851afca7ecb"><div class="ttname"><a href="ecs_8h.html#a7fb43c464e9ede60eb608851afca7ecb">Component_t</a></div><div class="ttdeci">struct type_data Component_t</div></div>
<div class="ttc" id="aecs_8h_html_abb1a65851848362cfaf4b74fd399a7f5"><div class="ttname"><a href="ecs_8h.html#abb1a65851848362cfaf4b74fd399a7f5">createEntity</a></div><div class="ttdeci">Entity createEntity(Entity *self, uint16_t number_data)</div><div class="ttdoc">Crea una nueva entidad.</div><div class="ttdef"><b>Definition</b> ecs.c:130</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a199186350fc25be37db0e03dd0ce6172" name="a199186350fc25be37db0e03dd0ce6172"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a199186350fc25be37db0e03dd0ce6172">&#9670;&#160;</a></span>dump_entidad()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dump_entidad </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>number_data</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Imprime en hexadecimal los datos de una entidad. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>Puntero a la entidad </td></tr>
    <tr><td class="paramname">number_data</td><td>Número de componentes de la entidad </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  109</span>                                                    {</div>
<div class="line"><span class="lineno">  110</span>    DEBUG_PRINT(DEBUG_LEVEL_INFO,</div>
<div class="line"><span class="lineno">  111</span>        INIT_TYPE_FUNC_DBG(<span class="keywordtype">void</span>, <a class="code hl_function" href="ecs_8h.html#a199186350fc25be37db0e03dd0ce6172">dump_entidad</a>)</div>
<div class="line"><span class="lineno">  112</span>            TYPE_DATA_DBG(<span class="keywordtype">void</span>*, <span class="stringliteral">&quot;self = %p&quot;</span>)</div>
<div class="line"><span class="lineno">  113</span>            TYPE_DATA_DBG(uint16_t, <span class="stringliteral">&quot;number_data = %p&quot;</span>)</div>
<div class="line"><span class="lineno">  114</span>        END_TYPE_FUNC_DBG,</div>
<div class="line"><span class="lineno">  115</span>        self, number_data);</div>
<div class="line"><span class="lineno">  116</span>    <span class="keywordtype">size_t</span> i;</div>
<div class="line"><span class="lineno">  117</span>    <span class="keywordflow">for</span> (i = 1; i-1 &lt; (<span class="keyword">sizeof</span>(<a class="code hl_struct" href="structtype__data.html">type_data</a>) * number_data) + <span class="keyword">sizeof</span>(size_t); i++) {</div>
<div class="line"><span class="lineno">  118</span>        printf(<span class="stringliteral">&quot;0x%02x%s&quot;</span>, *((uint8_t*)self + (i-1)), (!((i) % 8)) ? <span class="stringliteral">&quot;\n&quot;</span> : <span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><span class="lineno">  119</span>    }</div>
<div class="line"><span class="lineno">  120</span>    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><span class="lineno">  121</span>}</div>
<div class="ttc" id="aecs_8h_html_a199186350fc25be37db0e03dd0ce6172"><div class="ttname"><a href="ecs_8h.html#a199186350fc25be37db0e03dd0ce6172">dump_entidad</a></div><div class="ttdeci">void dump_entidad(void *self, uint16_t number_data)</div><div class="ttdoc">Imprime en hexadecimal los datos de una entidad.</div><div class="ttdef"><b>Definition</b> ecs.c:109</div></div>
<div class="ttc" id="astructtype__data_html"><div class="ttname"><a href="structtype__data.html">type_data</a></div><div class="ttdoc">Estructura que representa un componente.</div><div class="ttdef"><b>Definition</b> ecs.h:197</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af387fc28b69c7969a286f5a9ade089ff" name="af387fc28b69c7969a286f5a9ade089ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af387fc28b69c7969a286f5a9ade089ff">&#9670;&#160;</a></span>freeEntity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void freeEntity </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>entity</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Libera la memoria de una entidad y sus componentes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">entity</td><td>Puntero a la entidad que se desea liberar <div class="fragment"><div class="line"><a class="code hl_define" href="ecs_8h.html#a0a2ab36c53e84193f3aa6eaab81282df">Entity</a>* myEntity = <a class="code hl_function" href="ecs_8h.html#abb1a65851848362cfaf4b74fd399a7f5">createEntity</a>(&amp;myEntity, 5);</div>
<div class="line"><a class="code hl_function" href="ecs_8h.html#af387fc28b69c7969a286f5a9ade089ff">freeEntity</a>(myEntity);</div>
<div class="line">myEntity = NULL; <span class="comment">// Para evitar dangling pointers</span></div>
<div class="ttc" id="aecs_8h_html_af387fc28b69c7969a286f5a9ade089ff"><div class="ttname"><a href="ecs_8h.html#af387fc28b69c7969a286f5a9ade089ff">freeEntity</a></div><div class="ttdeci">void freeEntity(void *entity)</div><div class="ttdoc">Libera la memoria de una entidad y sus componentes.</div><div class="ttdef"><b>Definition</b> ecs.c:236</div></div>
</div><!-- fragment --> </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  236</span>                              {</div>
<div class="line"><span class="lineno">  237</span>    DEBUG_PRINT(DEBUG_LEVEL_INFO,</div>
<div class="line"><span class="lineno">  238</span>        INIT_TYPE_FUNC_DBG(<span class="keywordtype">void</span>, <a class="code hl_function" href="ecs_8h.html#af387fc28b69c7969a286f5a9ade089ff">freeEntity</a>)</div>
<div class="line"><span class="lineno">  239</span>            TYPE_DATA_DBG(<span class="keywordtype">void</span>*, <span class="stringliteral">&quot;entity = %p&quot;</span>)</div>
<div class="line"><span class="lineno">  240</span>        END_TYPE_FUNC_DBG,</div>
<div class="line"><span class="lineno">  241</span>        entity);</div>
<div class="line"><span class="lineno">  242</span>    <span class="keywordflow">if</span> (entity != NULL) {</div>
<div class="line"><span class="lineno">  243</span>        free(entity);</div>
<div class="line"><span class="lineno">  244</span>        entity = NULL;  <span class="comment">// Evitar punteros colgantes</span></div>
<div class="line"><span class="lineno">  245</span>    }</div>
<div class="line"><span class="lineno">  246</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="abc631ea620470e7587309fbbabe70b62" name="abc631ea620470e7587309fbbabe70b62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc631ea620470e7587309fbbabe70b62">&#9670;&#160;</a></span>get_type_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ecs_8h.html#a7fb43c464e9ede60eb608851afca7ecb">Component_t</a> get_type_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structadvanced__data.html">advanced_data</a> *</td>          <td class="paramname"><span class="paramname"><em>data</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtiene los datos de un componente. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Puntero a la estructura <a class="el" href="structadvanced__data.html" title="Estructura para manejar datos avanzados de componentes. Tipo de dato para cada componente en una enti...">advanced_data</a> que contiene la información del componente </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Estructura <a class="el" href="ecs_8h.html#a7fb43c464e9ede60eb608851afca7ecb">Component_t</a> con los datos del componente </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">   50</span>                                               {</div>
<div class="line"><span class="lineno">   51</span>    DEBUG_PRINT(DEBUG_LEVEL_INFO,</div>
<div class="line"><span class="lineno">   52</span>        INIT_TYPE_FUNC_DBG(<a class="code hl_typedef" href="ecs_8h.html#a7fb43c464e9ede60eb608851afca7ecb">Component_t</a>, <a class="code hl_function" href="ecs_8h.html#abc631ea620470e7587309fbbabe70b62">get_type_data</a>)</div>
<div class="line"><span class="lineno">   53</span>            TYPE_DATA_DBG(<a class="code hl_struct" href="structadvanced__data.html">advanced_data</a>*, <span class="stringliteral">&quot;data = %p&quot;</span>)</div>
<div class="line"><span class="lineno">   54</span>        END_TYPE_FUNC_DBG,</div>
<div class="line"><span class="lineno">   55</span>        data);</div>
<div class="line"><span class="lineno">   56</span>    <a class="code hl_struct" href="structtype__data.html">type_data</a> data_ret = {</div>
<div class="line"><span class="lineno">   57</span>        .data = 0,</div>
<div class="line"><span class="lineno">   58</span>        .type_data = (<a class="code hl_enumeration" href="ecs_8h.html#a193c7c54f3e1a85ea626883ba330ea1a">type_data_enum</a>){0}</div>
<div class="line"><span class="lineno">   59</span>    };</div>
<div class="line"><span class="lineno">   60</span>    <a class="code hl_define" href="ecs_8h.html#ae2d4c9c9af7f461449f4db9b036b32da">debug_ecs</a>(<span class="stringliteral">&quot;get_type_data&quot;</span>);</div>
<div class="line"><span class="lineno">   61</span>    <span class="keywordtype">void</span>* ptr = NULL;</div>
<div class="line"><span class="lineno">   62</span>    <span class="keywordflow">for</span> (</div>
<div class="line"><span class="lineno">   63</span>        ptr = data-&gt;<a class="code hl_variable" href="structadvanced__data.html#ab6bfe0188bce2552a11ea0154149de96">ptr</a>; </div>
<div class="line"><span class="lineno">   64</span>        *((uint16_t*)(ptr + data-&gt;<a class="code hl_variable" href="structadvanced__data.html#aadb6d6eb83e646653a1402032e45dcab">offset</a>)) != 0xffff; </div>
<div class="line"><span class="lineno">   65</span>        data-&gt;<a class="code hl_variable" href="structadvanced__data.html#aadb6d6eb83e646653a1402032e45dcab">offset</a> += <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="ecs_8h.html#a7fb43c464e9ede60eb608851afca7ecb">Component_t</a>)</div>
<div class="line"><span class="lineno">   66</span>    ) {</div>
<div class="line"><span class="lineno">   67</span>        <a class="code hl_struct" href="structtype__data.html">type_data</a>* data_get = (<a class="code hl_typedef" href="ecs_8h.html#a7fb43c464e9ede60eb608851afca7ecb">Component_t</a>*)(ptr + data-&gt;<a class="code hl_variable" href="structadvanced__data.html#aadb6d6eb83e646653a1402032e45dcab">offset</a>);</div>
<div class="line"><span class="lineno">   68</span>        <span class="keywordflow">switch</span> (data_get-&gt;<a class="code hl_variable" href="structtype__data.html#a7ee5a1276dcda058b217f533c6fcf3a8">type_data</a>)</div>
<div class="line"><span class="lineno">   69</span>        {</div>
<div class="line"><span class="lineno">   70</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="ecs_8h.html#a193c7c54f3e1a85ea626883ba330ea1aa53057c3ecc0578f654d21ae87ac4353c">System_func</a>: </div>
<div class="line"><span class="lineno">   71</span>            data_ret = (<a class="code hl_struct" href="structtype__data.html">type_data</a>){.data = data_get-&gt;<a class="code hl_variable" href="structtype__data.html#adb0fc9e9b7ce5e5f6f31c90b7fd73daf">data</a>, .type_data = data_get-&gt;<a class="code hl_variable" href="structtype__data.html#a7ee5a1276dcda058b217f533c6fcf3a8">type_data</a>};</div>
<div class="line"><span class="lineno">   72</span>            <a class="code hl_define" href="ecs_8h.html#ae2d4c9c9af7f461449f4db9b036b32da">debug_ecs</a>(<span class="stringliteral">&quot;System_func (...)(*0x%p)(...,)\n&quot;</span>, data_get-&gt;<a class="code hl_variable" href="structtype__data.html#adb0fc9e9b7ce5e5f6f31c90b7fd73daf">data</a>.<a class="code hl_variable" href="uniondata__component.html#ac711e629cdd4f2f037ea900d7ed9e835">System_func</a>); </div>
<div class="line"><span class="lineno">   73</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   74</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="ecs_8h.html#a193c7c54f3e1a85ea626883ba330ea1aa03fa22b2ff527f9e0086025afadacf79">Unknowned</a>:    </div>
<div class="line"><span class="lineno">   75</span>            data_ret = (<a class="code hl_struct" href="structtype__data.html">type_data</a>){.data = data_get-&gt;<a class="code hl_variable" href="structtype__data.html#adb0fc9e9b7ce5e5f6f31c90b7fd73daf">data</a>, .type_data = data_get-&gt;<a class="code hl_variable" href="structtype__data.html#a7ee5a1276dcda058b217f533c6fcf3a8">type_data</a>};</div>
<div class="line"><span class="lineno">   76</span>            <a class="code hl_define" href="ecs_8h.html#ae2d4c9c9af7f461449f4db9b036b32da">debug_ecs</a>(<span class="stringliteral">&quot;Unknowned 0x%p\n&quot;</span>, data_get-&gt;<a class="code hl_variable" href="structtype__data.html#adb0fc9e9b7ce5e5f6f31c90b7fd73daf">data</a>.<a class="code hl_variable" href="uniondata__component.html#a3684b8be1ded1132f471842464a8c734">Unknowned</a>); </div>
<div class="line"><span class="lineno">   77</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   78</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="ecs_8h.html#a193c7c54f3e1a85ea626883ba330ea1aa5df911aaca43421a25e32c3002befbc4">Object</a>:   </div>
<div class="line"><span class="lineno">   79</span>            data_ret = (<a class="code hl_struct" href="structtype__data.html">type_data</a>){.data = data_get-&gt;<a class="code hl_variable" href="structtype__data.html#adb0fc9e9b7ce5e5f6f31c90b7fd73daf">data</a>, .type_data = data_get-&gt;<a class="code hl_variable" href="structtype__data.html#a7ee5a1276dcda058b217f533c6fcf3a8">type_data</a>};</div>
<div class="line"><span class="lineno">   80</span>            <a class="code hl_define" href="ecs_8h.html#ae2d4c9c9af7f461449f4db9b036b32da">debug_ecs</a>(<span class="stringliteral">&quot;Object %s\n&quot;</span>, data_get-&gt;<a class="code hl_variable" href="structtype__data.html#adb0fc9e9b7ce5e5f6f31c90b7fd73daf">data</a>.<a class="code hl_variable" href="uniondata__component.html#a8469589da6564a713bcba390308412a3">Object</a>); </div>
<div class="line"><span class="lineno">   81</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   82</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="ecs_8h.html#a193c7c54f3e1a85ea626883ba330ea1aade17ec82ff106e0c2b4417f5ca231eae">String</a>:   </div>
<div class="line"><span class="lineno">   83</span>            data_ret = (<a class="code hl_struct" href="structtype__data.html">type_data</a>){.data = data_get-&gt;<a class="code hl_variable" href="structtype__data.html#adb0fc9e9b7ce5e5f6f31c90b7fd73daf">data</a>, .type_data = data_get-&gt;<a class="code hl_variable" href="structtype__data.html#a7ee5a1276dcda058b217f533c6fcf3a8">type_data</a>};</div>
<div class="line"><span class="lineno">   84</span>            <a class="code hl_define" href="ecs_8h.html#ae2d4c9c9af7f461449f4db9b036b32da">debug_ecs</a>(<span class="stringliteral">&quot;string %s\n&quot;</span>, data_get-&gt;<a class="code hl_variable" href="structtype__data.html#adb0fc9e9b7ce5e5f6f31c90b7fd73daf">data</a>.<a class="code hl_variable" href="uniondata__component.html#a16ca22f4c65a9707250b569342ae2cad">String</a>); </div>
<div class="line"><span class="lineno">   85</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   86</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="ecs_8h.html#a193c7c54f3e1a85ea626883ba330ea1aa4815677a428e37e90c6f71f94ddd7b65">Floating</a>:   </div>
<div class="line"><span class="lineno">   87</span>            data_ret = (<a class="code hl_struct" href="structtype__data.html">type_data</a>){.data = data_get-&gt;<a class="code hl_variable" href="structtype__data.html#adb0fc9e9b7ce5e5f6f31c90b7fd73daf">data</a>, .type_data = data_get-&gt;<a class="code hl_variable" href="structtype__data.html#a7ee5a1276dcda058b217f533c6fcf3a8">type_data</a>};</div>
<div class="line"><span class="lineno">   88</span>            <a class="code hl_define" href="ecs_8h.html#ae2d4c9c9af7f461449f4db9b036b32da">debug_ecs</a>(<span class="stringliteral">&quot;floating %Lf\n&quot;</span>, data_get-&gt;<a class="code hl_variable" href="structtype__data.html#adb0fc9e9b7ce5e5f6f31c90b7fd73daf">data</a>.<a class="code hl_variable" href="uniondata__component.html#a0c085ce4df7dad1260ebe319a30901fa">Floating</a>);</div>
<div class="line"><span class="lineno">   89</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   90</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="ecs_8h.html#a193c7c54f3e1a85ea626883ba330ea1aafa620f80ceb585b771a878cc135c4035">Number</a>:   </div>
<div class="line"><span class="lineno">   91</span>            data_ret = (<a class="code hl_struct" href="structtype__data.html">type_data</a>){.data = data_get-&gt;<a class="code hl_variable" href="structtype__data.html#adb0fc9e9b7ce5e5f6f31c90b7fd73daf">data</a>, .type_data = data_get-&gt;<a class="code hl_variable" href="structtype__data.html#a7ee5a1276dcda058b217f533c6fcf3a8">type_data</a>};</div>
<div class="line"><span class="lineno">   92</span>            <a class="code hl_define" href="ecs_8h.html#ae2d4c9c9af7f461449f4db9b036b32da">debug_ecs</a>(<span class="stringliteral">&quot;number 0x%llx\n&quot;</span>, data_get-&gt;<a class="code hl_variable" href="structtype__data.html#adb0fc9e9b7ce5e5f6f31c90b7fd73daf">data</a>.<a class="code hl_variable" href="uniondata__component.html#a62cfa14bac30fe70209bcde9787c6953">Number</a>); </div>
<div class="line"><span class="lineno">   93</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   94</span>        <span class="keywordflow">default</span>:          </div>
<div class="line"><span class="lineno">   95</span>            <span class="comment">/* en caso de un miembro ser 0xffffffffffffffff se finaliza el programa*/</span></div>
<div class="line"><span class="lineno">   96</span>            <span class="keywordflow">if</span> (data_get-&gt;<a class="code hl_variable" href="structtype__data.html#adb0fc9e9b7ce5e5f6f31c90b7fd73daf">data</a>.<a class="code hl_variable" href="uniondata__component.html#ac711e629cdd4f2f037ea900d7ed9e835">System_func</a> == (<span class="keywordtype">void</span>*)-1) <span class="keywordflow">return</span> (<a class="code hl_struct" href="structtype__data.html">type_data</a>){.data = 0, .type_data = 0};</div>
<div class="line"><span class="lineno">   97</span>            <a class="code hl_define" href="ecs_8h.html#ae2d4c9c9af7f461449f4db9b036b32da">debug_ecs</a>(<span class="stringliteral">&quot;desconocido %p\n&quot;</span>, data_get-&gt;<a class="code hl_variable" href="structtype__data.html#adb0fc9e9b7ce5e5f6f31c90b7fd73daf">data</a>.<a class="code hl_variable" href="uniondata__component.html#ac711e629cdd4f2f037ea900d7ed9e835">System_func</a>); </div>
<div class="line"><span class="lineno">   98</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   99</span>        }</div>
<div class="line"><span class="lineno">  100</span>    }</div>
<div class="line"><span class="lineno">  101</span>    <span class="keywordflow">return</span> data_ret;</div>
<div class="line"><span class="lineno">  102</span>}</div>
<div class="ttc" id="aecs_8h_html_a193c7c54f3e1a85ea626883ba330ea1a"><div class="ttname"><a href="ecs_8h.html#a193c7c54f3e1a85ea626883ba330ea1a">type_data_enum</a></div><div class="ttdeci">type_data_enum</div><div class="ttdoc">Enumeración de los tipos de datos de los componentes.</div><div class="ttdef"><b>Definition</b> ecs.h:169</div></div>
<div class="ttc" id="aecs_8h_html_a193c7c54f3e1a85ea626883ba330ea1aa4815677a428e37e90c6f71f94ddd7b65"><div class="ttname"><a href="ecs_8h.html#a193c7c54f3e1a85ea626883ba330ea1aa4815677a428e37e90c6f71f94ddd7b65">Floating</a></div><div class="ttdeci">@ Floating</div><div class="ttdef"><b>Definition</b> ecs.h:172</div></div>
<div class="ttc" id="aecs_8h_html_a193c7c54f3e1a85ea626883ba330ea1aa53057c3ecc0578f654d21ae87ac4353c"><div class="ttname"><a href="ecs_8h.html#a193c7c54f3e1a85ea626883ba330ea1aa53057c3ecc0578f654d21ae87ac4353c">System_func</a></div><div class="ttdeci">@ System_func</div><div class="ttdef"><b>Definition</b> ecs.h:170</div></div>
<div class="ttc" id="aecs_8h_html_a193c7c54f3e1a85ea626883ba330ea1aa5df911aaca43421a25e32c3002befbc4"><div class="ttname"><a href="ecs_8h.html#a193c7c54f3e1a85ea626883ba330ea1aa5df911aaca43421a25e32c3002befbc4">Object</a></div><div class="ttdeci">@ Object</div><div class="ttdef"><b>Definition</b> ecs.h:174</div></div>
<div class="ttc" id="aecs_8h_html_a193c7c54f3e1a85ea626883ba330ea1aade17ec82ff106e0c2b4417f5ca231eae"><div class="ttname"><a href="ecs_8h.html#a193c7c54f3e1a85ea626883ba330ea1aade17ec82ff106e0c2b4417f5ca231eae">String</a></div><div class="ttdeci">@ String</div><div class="ttdef"><b>Definition</b> ecs.h:173</div></div>
<div class="ttc" id="aecs_8h_html_a193c7c54f3e1a85ea626883ba330ea1aafa620f80ceb585b771a878cc135c4035"><div class="ttname"><a href="ecs_8h.html#a193c7c54f3e1a85ea626883ba330ea1aafa620f80ceb585b771a878cc135c4035">Number</a></div><div class="ttdeci">@ Number</div><div class="ttdef"><b>Definition</b> ecs.h:171</div></div>
<div class="ttc" id="aecs_8h_html_abc631ea620470e7587309fbbabe70b62"><div class="ttname"><a href="ecs_8h.html#abc631ea620470e7587309fbbabe70b62">get_type_data</a></div><div class="ttdeci">Component_t get_type_data(advanced_data *data)</div><div class="ttdoc">Obtiene los datos de un componente.</div><div class="ttdef"><b>Definition</b> ecs.c:50</div></div>
<div class="ttc" id="aecs_8h_html_ae2d4c9c9af7f461449f4db9b036b32da"><div class="ttname"><a href="ecs_8h.html#ae2d4c9c9af7f461449f4db9b036b32da">debug_ecs</a></div><div class="ttdeci">#define debug_ecs(...)</div><div class="ttdef"><b>Definition</b> ecs.h:214</div></div>
<div class="ttc" id="astructadvanced__data_html"><div class="ttname"><a href="structadvanced__data.html">advanced_data</a></div><div class="ttdoc">Estructura para manejar datos avanzados de componentes. Tipo de dato para cada componente en una enti...</div><div class="ttdef"><b>Definition</b> ecs.h:206</div></div>
<div class="ttc" id="astructadvanced__data_html_aadb6d6eb83e646653a1402032e45dcab"><div class="ttname"><a href="structadvanced__data.html#aadb6d6eb83e646653a1402032e45dcab">advanced_data::offset</a></div><div class="ttdeci">size_t offset</div><div class="ttdef"><b>Definition</b> ecs.h:208</div></div>
<div class="ttc" id="astructadvanced__data_html_ab6bfe0188bce2552a11ea0154149de96"><div class="ttname"><a href="structadvanced__data.html#ab6bfe0188bce2552a11ea0154149de96">advanced_data::ptr</a></div><div class="ttdeci">Component_t * ptr</div><div class="ttdef"><b>Definition</b> ecs.h:207</div></div>
<div class="ttc" id="astructtype__data_html_a7ee5a1276dcda058b217f533c6fcf3a8"><div class="ttname"><a href="structtype__data.html#a7ee5a1276dcda058b217f533c6fcf3a8">type_data::type_data</a></div><div class="ttdeci">type_data_enum type_data</div><div class="ttdef"><b>Definition</b> ecs.h:198</div></div>
<div class="ttc" id="astructtype__data_html_adb0fc9e9b7ce5e5f6f31c90b7fd73daf"><div class="ttname"><a href="structtype__data.html#adb0fc9e9b7ce5e5f6f31c90b7fd73daf">type_data::data</a></div><div class="ttdeci">data_component data</div><div class="ttdef"><b>Definition</b> ecs.h:199</div></div>
<div class="ttc" id="auniondata__component_html_a0c085ce4df7dad1260ebe319a30901fa"><div class="ttname"><a href="uniondata__component.html#a0c085ce4df7dad1260ebe319a30901fa">data_component::Floating</a></div><div class="ttdeci">long double Floating</div><div class="ttdef"><b>Definition</b> ecs.h:187</div></div>
<div class="ttc" id="auniondata__component_html_a16ca22f4c65a9707250b569342ae2cad"><div class="ttname"><a href="uniondata__component.html#a16ca22f4c65a9707250b569342ae2cad">data_component::String</a></div><div class="ttdeci">const char * String</div><div class="ttdef"><b>Definition</b> ecs.h:188</div></div>
<div class="ttc" id="auniondata__component_html_a3684b8be1ded1132f471842464a8c734"><div class="ttname"><a href="uniondata__component.html#a3684b8be1ded1132f471842464a8c734">data_component::Unknowned</a></div><div class="ttdeci">void * Unknowned</div><div class="ttdef"><b>Definition</b> ecs.h:190</div></div>
<div class="ttc" id="auniondata__component_html_a62cfa14bac30fe70209bcde9787c6953"><div class="ttname"><a href="uniondata__component.html#a62cfa14bac30fe70209bcde9787c6953">data_component::Number</a></div><div class="ttdeci">uint64_t Number</div><div class="ttdef"><b>Definition</b> ecs.h:186</div></div>
<div class="ttc" id="auniondata__component_html_a8469589da6564a713bcba390308412a3"><div class="ttname"><a href="uniondata__component.html#a8469589da6564a713bcba390308412a3">data_component::Object</a></div><div class="ttdeci">void * Object</div><div class="ttdef"><b>Definition</b> ecs.h:189</div></div>
<div class="ttc" id="auniondata__component_html_ac711e629cdd4f2f037ea900d7ed9e835"><div class="ttname"><a href="uniondata__component.html#ac711e629cdd4f2f037ea900d7ed9e835">data_component::System_func</a></div><div class="ttdeci">void * System_func</div><div class="ttdef"><b>Definition</b> ecs.h:185</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a125b9cc8c0ba3bb7cf5e877347f5e28f" name="a125b9cc8c0ba3bb7cf5e877347f5e28f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a125b9cc8c0ba3bb7cf5e877347f5e28f">&#9670;&#160;</a></span>reallocEntity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ecs_8h.html#ac1f825271a8ade98586af88d46631bf4">Entity</a> reallocEntity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ecs_8h.html#ac1f825271a8ade98586af88d46631bf4">Entity</a> *</td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>old_number_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>new_number_data</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Redimensiona una entidad existente. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>Entity* Puntero doble donde se almacenará la entidad creada </td></tr>
    <tr><td class="paramname">old_number_data</td><td>Número actual de componentes de la entidad </td></tr>
    <tr><td class="paramname">new_number_data</td><td>Nuevo número de componentes deseado </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Entity Puntero a la entidad redimensionada o NULL si falla la reasignación de memoria. <div class="fragment"><div class="line"><a class="code hl_define" href="ecs_8h.html#a0a2ab36c53e84193f3aa6eaab81282df">Entity</a> myEntity = <a class="code hl_function" href="ecs_8h.html#abb1a65851848362cfaf4b74fd399a7f5">createEntity</a>(&amp;myEntity, 2); <span class="comment">// entidad de 2 componentes</span></div>
<div class="line"><span class="keywordflow">if</span> (myEntity == NULL) {</div>
<div class="line">     printf(<span class="stringliteral">&quot;Entidad es NULL\n&quot;</span>);</div>
<div class="line">     <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"><a class="code hl_function" href="ecs_8h.html#a125b9cc8c0ba3bb7cf5e877347f5e28f">reallocEntity</a>(&amp;entidad, 2, 5); <span class="comment">// Redimensiona a 5 componentes</span></div>
<div class="ttc" id="aecs_8h_html_a125b9cc8c0ba3bb7cf5e877347f5e28f"><div class="ttname"><a href="ecs_8h.html#a125b9cc8c0ba3bb7cf5e877347f5e28f">reallocEntity</a></div><div class="ttdeci">Entity reallocEntity(Entity *self, size_t old_number_data, size_t new_number_data)</div><div class="ttdoc">Redimensiona una entidad existente.</div><div class="ttdef"><b>Definition</b> ecs.c:185</div></div>
</div><!-- fragment --> </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  185</span>                                                                                  {</div>
<div class="line"><span class="lineno">  186</span>    DEBUG_PRINT(DEBUG_LEVEL_INFO,</div>
<div class="line"><span class="lineno">  187</span>        INIT_TYPE_FUNC_DBG(<a class="code hl_define" href="ecs_8h.html#a0a2ab36c53e84193f3aa6eaab81282df">Entity</a>*, <a class="code hl_function" href="ecs_8h.html#a125b9cc8c0ba3bb7cf5e877347f5e28f">reallocEntity</a>)</div>
<div class="line"><span class="lineno">  188</span>            TYPE_DATA_DBG(<a class="code hl_define" href="ecs_8h.html#a0a2ab36c53e84193f3aa6eaab81282df">Entity</a>**, <span class="stringliteral">&quot;self = %p&quot;</span>)</div>
<div class="line"><span class="lineno">  189</span>            TYPE_DATA_DBG(<span class="keywordtype">size_t</span>, <span class="stringliteral">&quot;old_number_data = %zu&quot;</span>)</div>
<div class="line"><span class="lineno">  190</span>            TYPE_DATA_DBG(<span class="keywordtype">size_t</span>, <span class="stringliteral">&quot;new_number_data = %zu&quot;</span>)</div>
<div class="line"><span class="lineno">  191</span>        END_TYPE_FUNC_DBG,</div>
<div class="line"><span class="lineno">  192</span>        self, old_number_data, new_number_data);</div>
<div class="line"><span class="lineno">  193</span> </div>
<div class="line"><span class="lineno">  194</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno">  195</span><span class="comment">     * retornar una estructura con campos nulos implica que o hubo un error al hacer realloc, o no</span></div>
<div class="line"><span class="lineno">  196</span><span class="comment">     * se redimensiono el tamaño</span></div>
<div class="line"><span class="lineno">  197</span><span class="comment">    */</span></div>
<div class="line"><span class="lineno">  198</span>    <span class="keywordflow">if</span> (self == NULL) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  199</span>    <span class="keywordflow">if</span> (old_number_data &lt; new_number_data) {</div>
<div class="line"><span class="lineno">  200</span>        </div>
<div class="line"><span class="lineno">  201</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* _self = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)realloc(*(<span class="keywordtype">void</span>**)self, <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="ecs_8h.html#a7fb43c464e9ede60eb608851afca7ecb">Component_t</a>) * new_number_data);</div>
<div class="line"><span class="lineno">  202</span>        <a class="code hl_define" href="ecs_8h.html#a10ae52c0c36b78fd589ebf87c37f5d20">report_error_ecs</a>(</div>
<div class="line"><span class="lineno">  203</span>            _self != NULL,  <span class="comment">// si esto no ocurrio</span></div>
<div class="line"><span class="lineno">  204</span>                <span class="keywordflow">return</span> NULL; <span class="comment">// codigo que ejecutar</span></div>
<div class="line"><span class="lineno">  205</span>            , <span class="stringliteral">&quot;Error: no se pudo reasignar la memoria debido a que realloc fallo\n&quot;</span></div>
<div class="line"><span class="lineno">  206</span>        );</div>
<div class="line"><span class="lineno">  207</span>        DEBUG_PRINT(DEBUG_LEVEL_INFO, <span class="stringliteral">&quot;Datos redimensionado a %zu Bytes\n&quot;</span>, new_number_data);</div>
<div class="line"><span class="lineno">  208</span>        </div>
<div class="line"><span class="lineno">  209</span>        <span class="comment">// poner los valores desconocidos unicamente en la nueva memoria redimensionaada</span></div>
<div class="line"><span class="lineno">  210</span>        memset(_self + <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="ecs_8h.html#a7fb43c464e9ede60eb608851afca7ecb">Component_t</a>) * old_number_data, </div>
<div class="line"><span class="lineno">  211</span>            <a class="code hl_enumvalue" href="ecs_8h.html#a193c7c54f3e1a85ea626883ba330ea1aa03fa22b2ff527f9e0086025afadacf79">Unknowned</a>, <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="ecs_8h.html#a7fb43c464e9ede60eb608851afca7ecb">Component_t</a>) * (new_number_data - old_number_data));</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>        <span class="comment">// eliminar el antiguo final de la entidad</span></div>
<div class="line"><span class="lineno">  214</span>        *(uint16_t*)((<span class="keywordtype">void</span>*)_self + ((<span class="keyword">sizeof</span>(<a class="code hl_typedef" href="ecs_8h.html#a7fb43c464e9ede60eb608851afca7ecb">Component_t</a>) * old_number_data) )) = 0x0000;</div>
<div class="line"><span class="lineno">  215</span> </div>
<div class="line"><span class="lineno">  216</span>        <span class="comment">// indicar el nuevo final de la entidad</span></div>
<div class="line"><span class="lineno">  217</span>        *(uint16_t*)((<span class="keywordtype">void</span>*)_self + ((<span class="keyword">sizeof</span>(<a class="code hl_typedef" href="ecs_8h.html#a7fb43c464e9ede60eb608851afca7ecb">Component_t</a>) * new_number_data) )) = 0xffff;</div>
<div class="line"><span class="lineno">  218</span>        <span class="keywordflow">return</span> (<a class="code hl_define" href="ecs_8h.html#a0a2ab36c53e84193f3aa6eaab81282df">Entity</a>)_self;</div>
<div class="line"><span class="lineno">  219</span>        <a class="code hl_define" href="ecs_8h.html#a10ae52c0c36b78fd589ebf87c37f5d20">report_error_ecs</a>(</div>
<div class="line"><span class="lineno">  220</span>            <span class="keyword">false</span>,  <span class="comment">// si es false, se solicita que ocurra este raise</span></div>
<div class="line"><span class="lineno">  221</span>                <span class="keywordflow">return</span> NULL; <span class="comment">// codigo que ejecutar</span></div>
<div class="line"><span class="lineno">  222</span>            , <span class="stringliteral">&quot;Error: no se pudo reasignar la memoria, debido a que el nuevo size es menor al inicial\n&quot;</span></div>
<div class="line"><span class="lineno">  223</span>        );</div>
<div class="line"><span class="lineno">  224</span>    }</div>
<div class="line"><span class="lineno">  225</span>}</div>
<div class="ttc" id="aecs_8h_html_a10ae52c0c36b78fd589ebf87c37f5d20"><div class="ttname"><a href="ecs_8h.html#a10ae52c0c36b78fd589ebf87c37f5d20">report_error_ecs</a></div><div class="ttdeci">#define report_error_ecs(condition, code_exit,...)</div><div class="ttdoc">Macro para reportar errores en el sistema ECS Esta macro proporciona una forma consistente de manejar...</div><div class="ttdef"><b>Definition</b> ecs.h:330</div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
